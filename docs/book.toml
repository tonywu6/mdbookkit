[book]
authors = ["Tony Wu"]
language = "en"
multilingual = false
src = "src"
title = "mdbookkit"

[build]
build-dir = "dist"
create-missing = false
extra-watch-dirs = ["app"]

[rust]
edition = "2021"

[output.html]
additional-css = ["build/index.css"]
default-theme = "ayu"
git-repository-icon = "fa-github"
git-repository-url = "https://github.com/tonywu6/mdbookkit"
hash-files = true
preferred-dark-theme = "ayu"
site-url = "/"

[output.html.playground]
runnable = false

[preprocessor.clap-reflect]
before = ["rustdoc-link"]
command = """
  cargo run --package util-clap-reflect
    --profile=dev --
    --reflect rustdoc-link-options
"""

[preprocessor.rustdoc-link]
after = ["links"]
command = """
  cargo run --package mdbook-rustdoc-link
    --release
"""

cache-dir = "build"
manifest-dir = "../crates/rustdoc-link"
rust-analyzer = """
  cargo run --package util-rust-analyzer
    --release --
    analyzer
"""

[preprocessor.alerts]
after = ["rustdoc-link"]

[preprocessor.rust-analyzer-version]
after = ["rustdoc-link"]
command = """
  cargo run --package util-rust-analyzer
    --release --
    version
"""

[preprocessor.app]
command = "deno run -A app/build/preprocessor.ts"
